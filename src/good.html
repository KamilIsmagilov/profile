<p>A media placeholder is a dummy (placeholder) for a video or image. Your media file will be loaded instead of this stub. In this article, we will consider the ways of how to create a simple placeholder with a background color, and then with a blurry background image. What is it for?</p> <p>The lack of media placeholder, while reading your article from mobile devices with a slow Internet connection, can become a real problem.</p> <p>User can start reading, but at a certain moment the image which will break the entire layout of the site will load, and the read text will sharply be moved down.</p> <style>   .content3 {     margin: 20px auto;     max-width: 300px;     height: 200px;   }    .content_stretched {     width: 240px;     animation: stretch alternate 3s linear infinite;   }    .wrapper3,   .wrapper4,   .wrapper5,   .wrapper1,   .wrapper2 {     display: block;     position: relative;     width: 100%;     height: 0;     padding-bottom: 66.66%;     overflow: hidden;   }    .wrapper5 {     overflow: initial;   }    .wrapper2 {     padding-bottom: 32.75%;   }    .wrapper3 img,   .wrapper4 img,   .wrapper5 img,   .wrapper1 img,   .wrapper2 img {     position: absolute;     width: 100%;     top: 0;     left: 0;   }    .wrapper5 .small-img,   .wrapper4 .small-img,   .wrapper1 .small-img,   .wrapper2 .small-img {     filter: blur(10px);   }    .wrapper3 .small-img {     background-color: darkseagreen;     width: 100%;     position: absolute;     padding-bottom: 66%;   }    .wrapper3 .clipper,   .wrapper4 .clipper,   .wrapper5 .clipper {     position: relative;     padding-bottom: 0;     overflow: hidden;     animation: toggle-small-image 5s linear infinite;   }    @keyframes toggle-small-image {     0% {       padding-bottom: 0;     }      100% {       padding-bottom: 66.66%;     }   }    @keyframes stretch {     0% {       width: 240px;     }      100% {       width: 300px;     }   } </style> <p>   <picture class="wrapper1"> <img alt="animation of downloading article (preview)"       src="/images/articles/kak-sdelat-media-placeholder-i-chto-ehto-takoe/media-placeholder1-preview.jpg"       class="small-img" /> <img alt="animation of downloading article"       src="/images/articles/kak-sdelat-media-placeholder-i-chto-ehto-takoe/animation_en.gif" class="big-img" />   </picture> </p> <div class="additions">To analyze how your page loads with a slow internet connection, use <span     class="code">Chrome dev tools</span>. <span class="code">Network tab</span>&nbsp;->&nbsp;<span     class="code">Throttling</span> and set <span class="code">Slow&nbsp;3G</span>. So you can simulate slow internet connection. </div> <p>   <picture class="wrapper2"> <img alt="screenshot of dev tools (preview)"       src="/images/articles/kak-sdelat-media-placeholder-i-chto-ehto-takoe/chrome_dev_tools-preview.jpg"       class="small-img" /> <img alt="screenshot of dev tools"       src="/images/articles/kak-sdelat-media-placeholder-i-chto-ehto-takoe/chrome_dev_tools.png" class="big-img" />   </picture> </p> <p>If you use the image not in the <span class="code">&lt;img&gt;</span> tag, you can implement the placeholder just by setting two image URLs for the CSS: <span class="code">background-image</span>, At the first place, a small image which will be loaded first, then the original large image:</p> <pre>CSS<code class="css">#image {<br>  background-image: url("small-image.png"), url("big-image.png");</br>}</code></pre> <p>However, you should remember that, since the images are not inserted via the <span class="code">&lt;img&gt;</span> tag, it affects the semantics. Your images will not be properly indexed by search engines.</p> <p>Let's look at the most popular placeholder implementation.</p> <p>To create a media placeholder, we need to create a block element with the same dimensions as the image to be uploaded later. So, we could see this element first, and then load the image without disturbing the overall layout and without moving the text. This is a kind of “spacer”, into which the picture will be loaded. To make such a wrapper is very simple:</p> <pre>HTML<code class="html">&lt;div class="placeholder"&gt;<br> &lt;img src="{{ url }}" /&gt;<br>&lt;/div&gt;</code></pre> <pre>CSS<code class="css">.placeholder {<br>  width: 600px;<br>  height: 300px;<br>  background-color: darkseagreen;<br>}</code> </pre> <p>But on the real websites it is often necessary to make an image occupy all the entire available width, but retain its proportions regardless of screen resolution. So that, when viewed on devices with different resolutions, the image should occupy a certain width and, based on the width, be proportionally stretched to the desired height. An example:</p> <div class="stretch-example">   <div class="box"></div> </div> <style>   .stretch-example {     margin: 20px auto;     max-width: 100%;     width: 150px;     height: 200px;     padding: 20px;     border: 1px solid black;     border-bottom: 0;     animation: stretch 5s linear infinite alternate;   }    .stretch-example .box {     background-color: darkseagreen;     max-width: 100%;     padding-bottom: 45%;     box-shadow: 0 0 3px 1px rgba(0, 0, 0, .2);   }    @keyframes stretch {     to {       width: 350px;     }   } </style> <p>Please note, that no matter what width the image takes, it will always maintain its aspect ratio and have the desired height.  That is why, all you need to know to implement this technique is the aspect ratio of your image. </p> <p>Stretch block can be easyly implemented using CSS. You need to set relative position to the wrapper block, absolute position to image and to use property: <span class="code">padding-bottom:&nbsp;{{&nbsp;height&nbsp;/&nbsp;width&nbsp;}}</span></p> <p>For example, if your photo has a width of 900px and a height of 600px, then this ratio:   3:2&nbsp;=&nbsp;2&nbsp;/&nbsp;3&nbsp;=&nbsp;66.66%.</p> <p>4:3&nbsp;=&nbsp;3&nbsp;/&nbsp;4&nbsp;=&nbsp;75% (800px × 600px)</p> <p>1:1&nbsp;=&nbsp;1&nbsp;/&nbsp;1&nbsp;=&nbsp;100% (Square image e.g. 500px × 500px)</p> <p>You could use this form to enter width and height and calculate the padding of the parent block::</p> <div class="calc">   <div class="row">     <div class="cell"> <label>Width</label> <input type="number" id="width" placeholder="900" /> </div>     <div class="cell"> <label>Height</label> <input type="number" id="height" placeholder="600" /> </div>   </div>   <div class="row">     <div class="cell cell_padding"> <label>padding-bottom</label> <input type="text" id="padding" placeholder="66.66%"         disabled /> </div>   </div> </div> <style>   .calc {     background-color: #fbedf7;     padding: 20px;     border-radius: 15px;     margin-top: 20px;     margin-bottom: 20px;   }    .row {     width: 100%;     display: flex;     justify-content: space-between;   }    .cell {     width: 50%;     text-align: center;   }    .cell_padding {     margin: 20px auto 0;   }    .cell>label {     display: block;   }    .cell>input {     max-width: 100%;     font-size: 25px;     text-align: center;   } </style> <script>   var width = document.querySelector('.calc #width');   var height = document.querySelector('.calc #height');   var padding = document.querySelector('.calc #padding');   var example = document.querySelector('.calc .example');   width.addEventListener('input', function (e) {     if (height.value && height.value !== 0) {       var res = (height.value / width.value * 100).toString().slice(0, 5) + '%';       padding.value = res;       document.querySelector('.result > span').innerText = res;       example.style.height = res;     }   });   height.addEventListener('input', function (e) {     if (width.value && width.value !== 0) {       var res = (height.value / width.value * 100).toString().slice(0, 5) + '%';       padding.value = res;       document.querySelector('.result > span').innerText = res;       example.style.height = res;     }   }); </script> <pre>CSS<code class="css"> .placeholder {<br>   position: relative;<br>   width: 100%;<br>   height: 0;<br>   padding-bottom: <span class="result">66.66%</span>;<br>   background-color: darkseagreen<br> }<br> <br> .placeholder img {<br>   position: absolute;<br>   width: 100%;<br>   top: 0;<br>   left: 0;<br> }<br> </code> </pre> <p>You could also use CSS property <span class="code">calc</span>: <span     class="code">padding-bottom:&nbsp;calc(width&nbsp;/&nbsp;height)</span></p> <p>As a result, we will have something like this:</p> <div class="content3 content_stretched">   <picture class="wrapper3">     <div class="small-img"></div>     <div class="clipper"> <img src="http://localhost:3000/waves.jpeg"         class="big-img"> </div>   </picture> </div> <p class="additions">I intentionally made a smooth animation. In real conditions the picture is usually loaded not smoothly.</p> <p>The image and its parent block are stretch and shrink to any width and at the same time they always have the height we need.</p> <p>But of course, it would be much nicer to see a preview image before the original big picture will be loaded. Note. Important thing. The preview image placeholder has to be very small-sized and has to has the same aspect ratio as the original big image. The smaller the image size, the faster it will be loaded. An example of this article small image weighs 822 bytes and has size: 28px × 19px. It's enough to make a nice background preview while the user waiting for a big image. It seems like this:</p> <div class="content4">   <picture class="wrapper4"> <img src="http://localhost:3000/waves.jpeg"       class="small-img">     <div class="clipper"> <img src="http://localhost:3000/waves.jpeg"         class="big-img"> </div>   </picture> </div> <style>   .content4 {     margin: 20px auto;     max-width: 300px;   } </style> <pre>html<code lang="html">&lt;head&gt;<br> &lt;style&gt;<br>   .placeholder {<br>     display: block;<br>     position: relative;<br>     width: 100%;<br>     height: 0;<br>     padding-bottom: 66.66%;<br>   }<br>   .placeholder img {<br>     position: absolute;<br>     width: 100%;<br>     top: 0;<br>     left: 0;<br>    }<br>   .placeholder .small-img {<br>     background-size: cover;<br>     filter: blur(10px);<br>   }<br>   &lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br> &lt;picture class="placeholder"&gt;<br>   &lt;img src="{{ url маленькой картинки }}" class="small-img"&gt;<br>   &lt;img src="{{ url большой картинки }}" class="big-img"&gt;<br> &lt;/picture&gt;<br>&lt;/body&gt;</code></pre> <p>In example we blurred photo by CSS property <span class="code">filter:&nbsp;blur(10px)</span>. The value of blur   property can be any unit, for example, it can be percent. The larger the value, the greater the blur. Negative numbers   are not allowed. CSS property <span class="code">filter</span> is badly supported by browsers, however, this task   justifies using this property because users with the old browser just will see not blurred preview images. </p> <p class="additions">You also need to remember that these styles for the wrapper should be loaded very first. So It’s appropriate to use a style distribution method known as <span class="code">critical</span> CSS. I.e, the most important styles, that are responsible for the first rendering of the page layout, will not loaded in a separate file. They should be inserted inside the <span class="code">&lt;head&gt;</span> tag.</p> <p>Also, a small gotchas where detected during implementation. When applying the <span class="code">filter:&nbsp;blur()</span> its blur extends beyond the boundaries of the block. It looks like this</p> <div class="content4">   <picture class="wrapper5"> <img src="http://localhost:3000/waves.jpeg"       class="small-img">     <div class="clipper"> <img src="http://localhost:3000/waves.jpeg"         class="big-img"> </div>   </picture> </div> <p>To fix it you could simply set <span class="code">overflow:&nbsp;hidden</span> to the wrapper block. You can also come across a solution with adding negative margins. For example, <span class="code">margin:&nbsp;-10px</span>. The value of margin should be equal to the blur width.</p> <p class="additions">Of course, the best solution would be to use back-end libraries to automatically generate a small preview images with the same aspect ratio.</p> <p><i>Example image was made by <a       href="https://pixabay.com/users/Pexels-2286921/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1867285">Pexels</a>,     <a       href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1867285">Pixabay</a></i> </p>
